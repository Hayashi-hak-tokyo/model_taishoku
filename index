<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 【追加】検索エンジンにインデックスされないようにする（検索避け） -->
    <meta name="robots" content="noindex, nofollow">
    <title>退職プロセス・シミュレーター</title>
    
    <!-- ReactとReactDOMの読み込み -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- JSXをブラウザで動かすためのBabel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS (デザイン用) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* スクロールバーのカスタマイズ */
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        @keyframes fade-in { from { opacity: 0; transform: translateY(-2px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans h-screen overflow-hidden">

    <!-- ここにReactアプリが描画されます -->
    <div id="root"></div>

    <script type="text/babel">
        // --- アイコンコンポーネント (ライブラリを使わずに直接定義) ---
        const RotateCcw = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 12"/><path d="M3 3v9h9"/></svg>
        );
        const Activity = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
        );
        const PlusCircle = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>
        );
        const MinusCircle = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/></svg>
        );
        // ロックアイコン
        const Lock = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
        );

        // --- メインアプリケーション ---
        const MAX_HP = 100;
        
        // ★パスワード設定 (ここを変更すれば合言葉が変わります)
        const SECRET_PASSWORD = "1234";

        // ステージ定義
        const STAGES = [
            { id: 'fulfillment', label: '充実・成長', color: 'bg-red-400', textColor: 'text-gray-900', angle: -90 }, // 12時
            { id: 'wavering', label: '揺らぎ・迷い', color: 'bg-orange-300', textColor: 'text-gray-900', angle: -30 }, // 2時
            { id: 'conflict', label: '葛藤・抵抗', sub: '(怒りと対立)', color: 'bg-yellow-300', textColor: 'text-gray-900', angle: 30 }, // 4時
            { id: 'giving_up', label: '諦め・適応', color: 'bg-green-300', textColor: 'text-gray-900', angle: 90 }, // 6時
            { id: 'quiet_quitting', label: '静かな退職', color: 'bg-teal-300', textColor: 'text-gray-900', angle: 120 }, // 7時
            { id: 'indifference', label: '無関心', color: 'bg-blue-300', textColor: 'text-gray-900', angle: 150 }, // 8時
            { id: 'resignation', label: '退職・転出', color: 'bg-purple-400', textColor: 'text-gray-900', angle: 210 }, // 10時
        ];

        // イベント定義
        const EVENT_GROUPS = [
            {
                title: "プラスの出来事 (回復・獲得)",
                type: "positive",
                baseColor: "bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-800",
                events: [
                { 
                    label: "小: 承認・サポート", 
                    desc: "対話・ケア",
                    effects: { sysFairness: 0, intFairness: 10, autonomy: 0, competence: 5, resource: 10, energy: 5 } 
                },
                { 
                    label: "中: 役割・裁量付与", 
                    desc: "期待・信頼",
                    effects: { sysFairness: 5, intFairness: 5, autonomy: 15, competence: 10, resource: 5, energy: -5 } 
                },
                { 
                    label: "大: 昇進・制度改善", 
                    desc: "処遇・環境",
                    effects: { sysFairness: 15, intFairness: 5, autonomy: 5, competence: 10, resource: 10, energy: 10 } 
                },
                ]
            },
            {
                title: "マイナスの出来事 (負荷・喪失)",
                type: "negative",
                baseColor: "bg-red-50 hover:bg-red-100 border-red-200 text-red-800",
                events: [
                { 
                    label: "小: 疲労・停滞", 
                    desc: "ルーチン・疲れ",
                    effects: { sysFairness: 0, intFairness: 0, autonomy: -5, competence: -5, resource: -5, energy: -10 } 
                },
                { 
                    label: "中: 不信・不満", 
                    desc: "評価・人間関係",
                    effects: { sysFairness: -10, intFairness: -15, autonomy: -5, competence: -5, resource: -15, energy: -5 } 
                },
                { 
                    label: "大: 葛藤・枯渇", 
                    desc: "理不尽・過重労働",
                    effects: { sysFairness: -10, intFairness: -20, autonomy: -10, competence: -10, resource: -20, energy: -20 } 
                },
                ]
            }
        ];

        function ParamMini({ label, value, color, trackColor = "bg-gray-200", textColor = "text-gray-600" }) {
            return (
                <div className="flex flex-col w-full">
                <div className="flex justify-between items-center leading-none mb-0.5">
                    <span className={`text-[9px] font-bold ${textColor} origin-left whitespace-nowrap`}>{label}</span>
                    <span className={`text-[9px] font-mono ${textColor}`}>{value}</span>
                </div>
                <div className={`h-1.5 w-full ${trackColor} rounded-full overflow-hidden`}>
                    <div className={`h-full ${color} transition-all duration-500`} style={{ width: `${value}%` }} />
                </div>
                </div>
            );
        }

        // --- ログイン画面コンポーネント ---
        function LoginScreen({ onLogin }) {
            const [input, setInput] = React.useState("");
            const [error, setError] = React.useState(false);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (input === SECRET_PASSWORD) {
                    onLogin();
                } else {
                    setError(true);
                }
            };

            return (
                <div className="flex items-center justify-center h-screen bg-gray-100 p-4">
                    <form onSubmit={handleSubmit} className="bg-white p-8 rounded-2xl shadow-lg w-full max-w-sm text-center">
                        <div className="flex justify-center mb-4 text-gray-400">
                            <Lock size={48} />
                        </div>
                        <h2 className="text-lg font-bold text-gray-700 mb-2">限定アクセス</h2>
                        <p className="text-xs text-gray-500 mb-6">閲覧用のパスワードを入力してください</p>
                        
                        <input 
                            type="password" 
                            value={input}
                            onChange={(e) => {
                                setInput(e.target.value);
                                setError(false);
                            }}
                            placeholder="パスワード"
                            className="w-full p-3 rounded-lg border border-gray-300 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-400 text-center"
                            autoFocus
                        />
                        
                        {error && <p className="text-red-500 text-xs mb-4 font-bold">パスワードが間違っています</p>}
                        
                        <button 
                            type="submit" 
                            className="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors"
                        >
                            解除
                        </button>
                    </form>
                </div>
            );
        }

        function App() {
            // ログイン状態管理
            const [isLoggedIn, setIsLoggedIn] = React.useState(false);
            
            const [params, setParams] = React.useState({
                sysFairness: 80, // 公平性(制度的)
                intFairness: 80, // 公平性(対人的)
                autonomy: 80,    // 裁量感
                competence: 80,  // 有用感
                resource: 80,    // 心理的リソース(不可)
                energy: 80,      // 身体的エネルギー
            });

            const [currentStage, setCurrentStage] = React.useState('fulfillment');
            const [logs, setLogs] = React.useState([]);

            React.useEffect(() => {
                const avg = Object.values(params).reduce((a, b) => a + b, 0) / 6;
                let nextStage = 'fulfillment';

                // 平均スコアに基づいて段階的に時計回りに遷移
                if (avg >= 85) {
                    nextStage = 'fulfillment';
                } else if
